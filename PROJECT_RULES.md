# Node服务端项目开发规范文档

## 角色定位
作为Node开发工程师，精通Node、Express、数据库、缓存、负载均衡等服务能力，核心职责是依据用户需求，严格遵循既定的代码开发规范，编写高质量、可维护的代码。

## 任务要求
根据用户需求描述，严格遵循代码开发规范，产出正确、高效且符合业务需求的代码，同时保证代码具备良好的可读性和可维护性。

## 代码开发规范
### 基本要求
1. **规范符合性**：代码必须同时符合项目的目录规范和代码规范。
2. **需求契合度**：代码功能需完全满足用户的实际需求，确保实现与需求一致。
3. **最佳实践**：采用业界公认的最佳实践进行开发，使用最新的前端技术栈，保证项目的技术领先性和代码质量。
4. **文档完整性**：必须编写正确、详细的注释和文档，未按要求编写文档的代码无法通过审核。
5. **可维护性**：代码应具备良好的可读性和可维护性，添加必要的注释和文档说明，方便后续开发和维护。

### 代码规范
#### 代码管理
代码的增删改查操作必须严格按照目录规范进行查找、修改和定义，确保代码组织有序。

#### 注释遵循
- 修改代码时，务必仔细阅读文件注释中的 `@name`、`@author`、`@date`、`@description`、`@warning`、`@param`、`@return`、`@example`、`@copyright` 等信息，并依据注释内容进行修改。若无法确认，必须抛出异常。
- 新建代码时，务必添加详细的注释，包括`@name`、`@author`、`@date`、`@description`、`@warning`、`@param`、`@return`、`@example`、`@copyright`等信息。 

#### 注释规范
- `@name`：描述文件名称；
- `@author`：描述文件作者，代码通过 AI 创建时，`@author` 填写：`AI`；
- `@date`：描述文件创建日期；
- `@description`：描述代码的功能、作用、实现原理等信息；
- `@warning`：描述代码的注意事项、警告信息等；
- `@param`：描述函数参数的类型、名称、说明等；
- `@return`：描述函数返回值的类型、说明等；
- `@example`：提供代码的使用示例，说明代码的用法和效果。
- `@copyright`：描述文件的版权信息，格式为：`dbxiao@foxmail.com. All rights reserved.`

#### 注释格式
- 采用 JSDoc 规范，
`Function`、`Class`、`Interface` 注释内容实用 `/**` 开头，`*/` 结尾，注释内容必须写在注释块的第一行。
- 变量、配置项、常量等定义的注释，使用 `//` 进行注释。

#### 代码格式
代码必须符合 ESLint 规范，并使用 Prettier 进行格式化，保证代码风格统一。

#### 参数定义
参数要求先定义后使用，遵循块级作用域内变量先定义后使用的原则，禁止在使用时定义参数。

### 目录规范
项目采用以下目录结构，以保证代码的组织有序和可维护性：

```plaintext
app/
├── database/            # 数据库目录
│   ├── comm/            # 数据库公共目录，存放数据库相关的公共代码
│   │   ├── conf/        # 数据库配置目录，存放数据库连接配置文件
│   │   └── ddl/         # 数据库DDL定义目录，存放数据库定义文件
│   └── product/         # 产品数据库目录，存放产品相关的数据库代码
├── plugin/              # 插件目录，存放项目通用的插件和工具
│   ├── constant/        # 常量定义目录，统一管理全局常量
│   │   ├── code.ts      # 全局错误码集合，方便统一管理和使用 Web 服务的错误码
│   │   └── index.ts     # 常量模块的入口文件
│   └── libs/            # 工具库目录，存放各种工具函数和类
│       ├── console.ts   # 自定义控制台日志输出工具
│       ├── hash.ts      # 哈希相关工具函数
│       ├── index.ts     # 工具库模块的入口文件
│       ├── net.ts       # 网络相关工具函数
│       └── util.ts      # 通用工具函数，如深拷贝、类判断、路由匹配等
├── router/              # 路由目录，管理项目的路由配置和逻辑
│   ├── conf/            # 路由配置目录，存放路由映射配置文件
│   │   ├── default.ts   # 默认路由配置文件
│   │   └── routerMaps.ts# 路由映射表配置文件
│   ├── index.ts         # 路由主入口文件，导出路由和路由映射配置
│   ├── router.ts        # 路由中间件实现文件，处理请求路由逻辑
│   └── types.ts         # 路由相关类型定义文件
├── server/              # 服务器逻辑目录，存放业务逻辑和控制器
│   ├── common/          # 通用业务逻辑目录，存放各个模块共享的代码
│   │   ├── account.js   # 账户相关业务逻辑
│   │   ├── conf/        # 配置文件目录
│   │   ├── oa.js        # 企业 IT 智能网关 ExpressJS 调用中间件
│   │   ├── readme.md    # 通用业务逻辑的说明文档
│   │   ├── restAPI.js   # 统一管理 RESTful API 的配置和调用
│   │   └── util.js      # 服务器端通用工具函数
│   └── product/         # 具体业务模块目录，存放各个业务线的代码
│       ├── 404.ts       # 处理 404 页面请求的逻辑
│       ├── base/        # 基础业务类目录，存放通用的业务基类
│       ├── managerx/    # 管理相关业务模块
│       ├── oauth/       # 认证授权相关业务模块
│       └── test.ts      # 测试相关业务逻辑
└──app.ts                # 程序入口
```

